# ë¬´ì¸ ìíŒê¸° ì¥ì¹˜ ë“±ë¡ ì‹œìŠ¤í…œ

TypeScript ê¸°ë°˜ì˜ ë¬´ì¸ ìíŒê¸° ì¥ì¹˜ ë“±ë¡ ë° ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. SRP(ë‹¨ì¼ ì±…ì„ ì›ì¹™)ë¥¼ ì ìš©í•œ ê³„ì¸µ êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì—ˆìœ¼ë©°, AWS í´ë¼ìš°ë“œ ì¸í”„ë¼ë¥¼ í™œìš©í•©ë‹ˆë‹¤.

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ìíŒê¸° ì¥ì¹˜    â”‚    â”‚   ë°±ì—”ë“œ ì„œë²„    â”‚    â”‚  ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ  â”‚
â”‚  (Node.js)      â”‚â—„â”€â”€â–ºâ”‚  (Express.js)   â”‚â—„â”€â”€â–ºâ”‚   (React.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AWS Services  â”‚
                    â”‚  - DynamoDB     â”‚
                    â”‚  - SQS          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ ì£¼ìš” ê¸°ëŠ¥

### ğŸ¤– ìíŒê¸° ì¥ì¹˜
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹œ ìë™ ë“±ë¡ ìš”ì²­
- í•˜ë“œì›¨ì–´ ì •ë³´ ìˆ˜ì§‘ ë° ì „ì†¡
- ìŠ¹ì¸ ìƒíƒœ ì£¼ê¸°ì  í™•ì¸ (5ë¶„ ê°„ê²©)
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ìë™ ì¬ì‹œë„
- 24ì‹œê°„ í›„ ìë™ ì¬ë“±ë¡

### ğŸ–¥ï¸ ë°±ì—”ë“œ ì„œë²„
- RESTful API ì œê³µ
- JWT ê¸°ë°˜ ì¸ì¦
- ì¥ì¹˜ ë“±ë¡ ìš”ì²­ ì²˜ë¦¬
- ê´€ë¦¬ì ìŠ¹ì¸/ê±°ë¶€ ê¸°ëŠ¥
- DynamoDB ë°ì´í„° ì €ì¥
- SQS í ìƒì„± ë° ê´€ë¦¬

### ğŸ“Š ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- ì‹¤ì‹œê°„ ì¥ì¹˜ í˜„í™© ëª¨ë‹ˆí„°ë§
- ë“±ë¡ ìš”ì²­ ìŠ¹ì¸/ê±°ë¶€
- ì¥ì¹˜ ê²€ìƒ‰ ë° í•„í„°ë§
- ë°˜ì‘í˜• ì›¹ ì¸í„°í˜ì´ìŠ¤

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: Node.js, Express.js, TypeScript
- **Frontend**: React.js, TypeScript, Tailwind CSS
- **Database**: AWS DynamoDB
- **Message Queue**: AWS SQS
- **Authentication**: JWT
- **Validation**: Joi
- **HTTP Client**: Axios

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
â”œâ”€â”€ src/                          # ë°±ì—”ë“œ ì†ŒìŠ¤ì½”ë“œ
â”‚   â”œâ”€â”€ domain/                   # ë„ë©”ì¸ ëª¨ë¸ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™
â”‚   â”‚   â”œâ”€â”€ Device.ts
â”‚   â”‚   â””â”€â”€ validators/
â”‚   â”œâ”€â”€ service/                  # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ DeviceRegistrationService.ts
â”‚   â”œâ”€â”€ interface/                # ì™¸ë¶€ ì‹œìŠ¤í…œ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ messaging/
â”‚   â”‚   â””â”€â”€ auth/
â”‚   â”œâ”€â”€ controllers/              # API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ routes/                   # ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ middleware/               # ë¯¸ë“¤ì›¨ì–´
â”‚   â””â”€â”€ server.ts                 # ì„œë²„ ì§„ì…ì 
â”œâ”€â”€ frontend/                     # í”„ë¡ íŠ¸ì—”ë“œ ì†ŒìŠ¤ì½”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/           # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ pages/                # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ services/             # API ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ types/                # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ client-simulator/             # ìíŒê¸° í´ë¼ì´ì–¸íŠ¸ ì‹œë®¬ë ˆì´í„°
â””â”€â”€ scripts/                      # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. í™˜ê²½ ì„¤ì •

```bash
# ë°±ì—”ë“œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env

# í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp frontend/.env.example frontend/.env

# í´ë¼ì´ì–¸íŠ¸ ì‹œë®¬ë ˆì´í„° í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp client-simulator/.env.example client-simulator/.env
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# ë°±ì—”ë“œ
npm install

# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm install

# í´ë¼ì´ì–¸íŠ¸ ì‹œë®¬ë ˆì´í„°
cd ../client-simulator
npm install
```

### 3. AWS ì„¤ì •

```bash
# DynamoDB í…Œì´ë¸” ìƒì„±
node scripts/create-dynamodb-table.js create
```

### 4. ì„œë²„ ì‹¤í–‰

```bash
# ë°±ì—”ë“œ ê°œë°œ ì„œë²„
npm run dev

# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„
cd frontend
npm start

# ìíŒê¸° í´ë¼ì´ì–¸íŠ¸ ì‹œë®¬ë ˆì´í„°
cd client-simulator
npm run dev
```

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### ì¥ì¹˜ ê´€ë ¨ API

| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| POST | `/api/devices/register` | ì¥ì¹˜ ë“±ë¡ ìš”ì²­ | âŒ |
| GET | `/api/devices/status/:hardwareId` | ì¥ì¹˜ ìƒíƒœ í™•ì¸ | âŒ |
| GET | `/api/devices/pending` | ëŒ€ê¸° ì¤‘ì¸ ì¥ì¹˜ ëª©ë¡ | âœ… |
| PUT | `/api/devices/:deviceId/approve` | ì¥ì¹˜ ìŠ¹ì¸ | âœ… |
| PUT | `/api/devices/:deviceId/reject` | ì¥ì¹˜ ê±°ë¶€ | âœ… |

### ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œ

#### ì¥ì¹˜ ë“±ë¡ ìš”ì²­
```json
POST /api/devices/register
{
  "hardwareId": "VM-ABC12345",
  "tenantId": "550e8400-e29b-41d4-a716-446655440000",
  "ipAddress": "192.168.1.100",
  "systemInfo": {
    "os": "Linux 5.4.0",
    "version": "v16.14.0",
    "architecture": "x64",
    "memory": "8GB (6GB ì‚¬ìš© ê°€ëŠ¥)",
    "storage": "500GB SSD"
  }
}
```

#### ì„±ê³µ ì‘ë‹µ
```json
{
  "status": "success",
  "message": "Device registration request submitted successfully"
}
```

#### ì¥ì¹˜ ìƒíƒœ í™•ì¸ (ìŠ¹ì¸ë¨)
```json
GET /api/devices/status/VM-ABC12345

{
  "status": "success",
  "message": "Device has been approved and is ready for operation",
  "data": {
    "status": "approved",
    "deviceId": "550e8400-e29b-41d4-a716-446655440001",
    "sqsQueueUrl": "https://sqs.us-east-1.amazonaws.com/123456789/device-550e8400-e29b-41d4-a716-446655440001"
  }
}
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- JWT í† í° ê¸°ë°˜ ì¸ì¦
- ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬ (Joi)
- CORS ì„¤ì •
- Helmet.js ë³´ì•ˆ í—¤ë”
- í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•œ ë¯¼ê° ì •ë³´ ê´€ë¦¬

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
npm test

# í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
cd frontend
npm test
```

## ğŸ“ ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ

1. **ë„ë©”ì¸ ëª¨ë¸** ì •ì˜ (`src/domain/`)
2. **ì„œë¹„ìŠ¤ ë¡œì§** êµ¬í˜„ (`src/service/`)
3. **ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ** êµ¬í˜„ (`src/interface/`)
4. **ì»¨íŠ¸ë¡¤ëŸ¬** êµ¬í˜„ (`src/controllers/`)
5. **ë¼ìš°íŒ…** ì„¤ì • (`src/routes/`)
6. **í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸** êµ¬í˜„ (`frontend/src/`)

### ì½”ë“œ ìŠ¤íƒ€ì¼

- TypeScript strict ëª¨ë“œ ì‚¬ìš©
- ESLint ê·œì¹™ ì¤€ìˆ˜
- SRP(ë‹¨ì¼ ì±…ì„ ì›ì¹™) ì ìš©
- ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ ì‚¬ìš©

## ğŸš€ ë°°í¬

### Dockerë¥¼ ì‚¬ìš©í•œ ë°°í¬

```bash
# ë°±ì—”ë“œ Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t vending-machine-backend .

# í”„ë¡ íŠ¸ì—”ë“œ Docker ì´ë¯¸ì§€ ë¹Œë“œ
cd frontend
docker build -t vending-machine-frontend .
```

### AWS ë°°í¬

1. **EC2** ë˜ëŠ” **ECS**ì— ë°±ì—”ë“œ ë°°í¬
2. **S3** + **CloudFront**ì— í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬
3. **DynamoDB** í…Œì´ë¸” ìƒì„±
4. **SQS** í ì„¤ì •
5. **IAM** ì—­í•  ë° ì •ì±… ì„¤ì •

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License